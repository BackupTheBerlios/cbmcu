# OpenOCD config file, auto generated by CodeBlocks

#daemon configuration
telnet_port 4444
gdb_port 2000
gdb_detach reset

#interface
interface ft2232

ft2232_device_desc "Olimex OpenOCD JTAG A"
ft2232_layout olimex-jtag
#jtag_speed 8
jtag_nsrst_delay 100
jtag_ntrst_delay 100


#Start slow
jtag_khz 10

#use combined on interfaces or targets that can't set TRST/SRST separately
reset_config trst_and_srst

#jtag scan chain
jtag newtap str710 cpu -irlen 4 -ircapture 0x1 -irmask 0x0f -expected-id 0x3f0f0f0f
target create str710.cpu arm7tdmi -endian little -chain-position str710.cpu -variant arm7tdmi
str710.cpu configure -event reset-start { jtag_khz 10 }
str710.cpu configure -event reset-init { jtag_khz 100 }
str710.cpu configure -event gdb-flash-erase-start {
	flash protect 0 0 7 off
	flash protect 1 0 1 off
}
str710.cpu configure -work-area-virt 0 -work-area-phys 0x2000C000 -work-area-size 0x4000 -work-area-backup 0

#flash bank str7x <base> <size> 0 0 <target#> <variant>
flash bank str7x 0x40000000 0x00040000 0 0 0 STR71x
flash bank str7x 0x400C0000 0x00004000 0 0 0 STR71x
